# 1. 接收来自HTTP的日志（例如：curl、Postman、应用程序直接发送）
<source>
  @type http
  port 9880
  bind 0.0.0.0
  tag http.input
  <parse>
    @type json
  </parse>
</source>

# 2. 接收通过 forward 协议转发的日志
<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

# 3. 为所有日志添加公共字段
<filter **>
  @type record_transformer
  <record>
    hostname "#{Socket.gethostname}"
    service "my_windows_app"
  </record>
</filter>

# 4. 主输出：发送到Elasticsearch
<match **>
  @type elasticsearch
  host es-master
  port 9200
  logstash_format true
  logstash_prefix fluentd
  flush_interval 5s
</match>

# 5. 辅助输出：在控制台打印一份，便于调试
<match **>
  @type stdout
</match>